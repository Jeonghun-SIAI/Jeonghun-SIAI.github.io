<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="ko" class="no-js">

<head>
  <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>정수선형계획법 기반 분산에너지시스템 최적화 설명 - 3) 배터리의 충/방전 스케줄 정하기: Python 코드 | A test page</title>
<meta name="description" content="이전 포스팅에서 봤던 문제에서는 목적함수와 제약조건식들이 모두 선형이었다. 제곱항, 로그항 등은 없었다. 이 경우, 선형계획법 (Linear Programming) 을 이용해서 풀 수 있다.">


  <meta name="author" content="Jeonghun Song">
  
  <meta property="article:author" content="Jeonghun Song">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="ko_KR">
<meta property="og:site_name" content="A test page">
<meta property="og:title" content="정수선형계획법 기반 분산에너지시스템 최적화 설명 - 3) 배터리의 충/방전 스케줄 정하기: Python 코드">
<meta property="og:url" content="http://localhost:4000/2023/04/linprogthree.html">


  <meta property="og:description" content="이전 포스팅에서 봤던 문제에서는 목적함수와 제약조건식들이 모두 선형이었다. 제곱항, 로그항 등은 없었다. 이 경우, 선형계획법 (Linear Programming) 을 이용해서 풀 수 있다.">







  <meta property="article:published_time" content="2023-04-13T00:00:00+09:00">





  

  


<link rel="canonical" href="http://localhost:4000/2023/04/linprogthree.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Jeonghun Song",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="A test page Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



  <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<head>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
</head>


<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
          equationNumbers: {
            autoNumber: "AMS"
          }
        },
        tex2jax: {
        inlineMath: [ ['$', '$'] ],
        displayMath: [ ['$$', '$$'] ],
        processEscapes: true,
      }
    });
    MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
          alert("Math Processing Error: "+message[1]);
        });
    MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
          alert("Math Processing Error: "+message[1]);
        });
    </script>
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<!-- end custom head snippets -->
</head>

<body
  class="layout--single">
  <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

  

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo.png" alt="A test page"></a>
        
        <a class="site-title" href="/">
          A test page
          <span class="site-subtitle">learning Github Page</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/aboutme/">About Me</a>
            </li><li class="masthead__menu-item">
              <a href="/search/">Search</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/">Category</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/">Tag</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">카테고리 목록</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


  <div class="initial-content">
    




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#2023" itemprop="item"><span itemprop="name">2023</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/categories/#04" itemprop="item"><span itemprop="name">04</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">정수선형계획법 기반 분산에너지시스템 최적화 설명 - 3) 배터리의 충/방전 스케줄 정하기: Python 코드</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  

  <div class="sidebar sticky">
    
  
  
  
  
    
    
      
    
    
  
  
   <!-- three lines added by Jeonghun  -->
    

<nav class="nav__list">
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">카테고리 목록</label>
  <ul class="nav__items" id="category_tag_menu">
      <!--전체 글 수-->
      <li>
            📂 <span style="font-family:'Cafe24Oneprettynight';">전체 글 수</style> <span style="font-family:'Coming Soon';">21</style> <span style="font-family:'Cafe24Oneprettynight';">개</style> 
      </li>
      <li>
        <!--span 태그로 카테고리들을 크게 분류 ex) C/C++/C#-->
        <span class="nav__sub-title">범주1</span>
            <!--ul 태그로 같은 카테고리들 모아둔 페이지들 나열-->
            <ul>
                <!--Cpp 카테고리 글들을 모아둔 페이지인 /categories/cpp 주소의 글로 링크 연결-->
                <!--category[1].size 로 해당 카테고리를 가진 글의 개수 표시--> 
                
                    
                
                    
                
                    
                        <li><a href="/code" class="">코드 (1)</a></li>
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                        <li><a href="/theory" class="">이론 (2)</a></li>
                    
                
                    
                
                    
                
                    
                
            </ul>
            <ul>
                
                    
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/energy" class="">에너지 (15)</a></li>
                    
                
            </ul>
        <span class="nav__sub-title">범주2</span>
            <ul>
                
                    
                
                    
                
                    
                
                    
                        <li><a href="/project" class="">프로젝트 (1)</a></li>
                    
                
                    
                
            </ul>
            <ul>
                
                    
                        <li><a href="/etc" class="">기타 (2)</a></li>
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
      </li>
  </ul>
</nav>
  
  

  </div>




  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="정수선형계획법 기반 분산에너지시스템 최적화 설명 - 3) 배터리의 충/방전 스케줄 정하기: Python 코드">
    <meta itemprop="description" content="이전 포스팅에서 봤던 문제에서는 목적함수와 제약조건식들이 모두 선형이었다. 제곱항, 로그항 등은 없었다. 이 경우, 선형계획법 (Linear Programming) 을 이용해서 풀 수 있다.">
    <meta itemprop="datePublished" content="2023-04-13T00:00:00+09:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/2023/04/linprogthree.html" class="u-url" itemprop="url">정수선형계획법 기반 분산에너지시스템 최적화 설명 - 3) 배터리의 충/방전 스케줄 정하기: Python 코드
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-13T00:00:00+09:00">2023-04-13</time>
      </span>
    

    

    
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header> 
              
 <!-- 우측 TOC -->
            </nav>
          </aside>
        
        <p>이전 포스팅에서 봤던 문제에서는 목적함수와 제약조건식들이 모두 선형이었다. 제곱항, 로그항 등은 없었다. 이 경우, 선형계획법 (Linear Programming) 을 이용해서 풀 수 있다.</p>

<p>선형계획법을 `무료로’ 수행하기 위해서는, Python에서 cvxopt 패키지 설치 후 glpk 모듈을 쓸 수 있다 <a href="https://cvxopt.org/install/">(설치 방법 링크)</a>. 무료인 만큼 계산 시간이 많이 필요하지만, 그래도 적절한 가정들 하에 간소화된 에너지 최적화 문제들은 푸는 것 자체는 가능하다.</p>

<p>`유료로’ 수행하는 방법으로는 MATLAB optimization toolbox 사용, 또는 값비싼 상용 solver들 (CPLEX, Gurobi) 사용 등이 있다. 박사과정 때 MATLAB에 Gurobi academic license를 연계해서 써 봤는데, 정말 빠르긴 빨랐다. (다만 Gurobi commercial license의 permanent version 가격이 천만원 단위였던 것으로 기억하는데… 최근에는 cloud 접속 방식으로 필요한 만큼만 사용할 수 있는 서비스가 있다고 얼핏 듣기는 했다.)</p>

<p><br />
이 포스팅에서는 Python cvxopt 패키지의 glpk 모듈로 선형계획법 문제를 코딩해 푸는 과정을 설명한다.</p>

<p>코딩 시, 각 제약조건들을 개별적으로 입력하는 것이 아니라 등호 제약조건들을 하나의 큰 행렬로 통합해야 하고, 별도로 부등호 제약조건들도 하나의 행렬로 통합해야 한다. (사실 수식으로 입력하면 자동으로 행렬로 변환해주는 프로그램이 있다고 듣기는 했는데, 필자는 이를 써 본 적이 없으며, 지금도 필요성을 느끼지 않는다.)</p>

<p>등호 제약조건들을 통합하는 예시를 보자. 우선 각 시간별 에너지 부하 충족 조건 수식을 다시 쓰면 아래와 같다.</p>

<p>$ p_{\text{grid}}[1] - p_{\text{ch}}[1] + p_{\text{disch}}[1] = p_{\text{load}}[1]$</p>

<p>$ p_{\text{grid}}[2] - p_{\text{ch}}[2] + p_{\text{disch}}[2] = p_{\text{load}}[2]$</p>

<p>$ \vdots $</p>

<p>$ p_{\text{grid}}[24] - p_{\text{ch}}[24] + p_{\text{disch}}[24] = p_{\text{load}}[24]$</p>

<p>각 물리량 별로, 모든 시간의 시간별 값들을 하나로 묶은 열벡터를 정의하자. 일례로</p>

<p>$ \textbf{p}_{\text{load}} = [p_{\text{load}}[1], p_{\text{load}}[2], \cdots, p_{\text{load}}[24]]^{\top} $ 이다.</p>

<p>그러면 24시간 동안의 제약조건을 묶으면 아래와 같은 식이 된다.</p>

<p>$  \textbf{I} \textbf{p}_{\text{grid}} - \textbf{I} \textbf{p}_{\text{ch}} + \textbf{I} \textbf{p}_{\text{disch}} + \textbf{0} \textbf{e}_{\text{batt}} = \textbf{I}  \textbf{p}_{\text{load}} $</p>

<p>$\textbf{I}$는 단위행렬이고, $\textbf{0}$는 영행렬이다. 2부에서는 시간별 부하 충족 조건에 $\textbf{e}_{\text{batt}}$를 기재하지 않았지만, 여기서는 기재했음에 주의한다. 그리고 $\textbf{e}_{\text{batt}}$는 25차원 벡터, 그 앞에 붙은 영행렬은 $24 \times 25$ 행렬임에도 주의한다 ($e_{\text{batt}}[t]$는 $t=0,1,\cdots,24$에 대해 정의되므로).</p>

<p>cvxopt에서 등호 제약조건은 $\textbf{A}_{eq} \textbf{x} = \textbf{b}_{eq}$ 꼴로 입력되어야 한다, $\textbf{x}$는 우리가 결정해야 할 변수들을 모두 모은 벡터 ($1 \sim 24$시간 각각의 수전, 충전, 방전, $0 \sim 24$시간 각각의 배터리 내 에너지) 이고, $\textbf{A}$는 그 변수들에 붙는 계수들, $\textbf{b}$는 변수가 아닌 상수들을 의미한다. 그러면,  $\textbf{A} \textbf{x} = \textbf{b}$ 꼴의 식은 아래와 같다.</p>

<p>$ \begin{bmatrix}
\textbf{I} &amp; -\textbf{I} &amp; \textbf{I} &amp; \textbf{0}
\end{bmatrix} \begin{bmatrix}
\textbf{p}_{\text{grid}} \newline
\textbf{p}_{\text{ch}} \newline
\textbf{p}_{\text{disch}} \newline
\textbf{e}_{\text{batt}}
\end{bmatrix} = \textbf{p}_{\text{load}} $</p>

<p>위 식을 코드로 표현해 보자. 코딩해야 할 것은 $\textbf{A}_{eq}$와 $\textbf{b}_{eq}$이다. $\textbf{x}$는 따로 코딩하지는 않는다 (어차피 문제 풀기 전에는 값을 모르니까). 단, 모든 식에서 변수들의 순서는 통일되어야 한다.</p>

<p>$\textbf{A}_{eq}$에 포함되는 행렬들은 $24 \times 24$ 단위행렬과 $24 \times 25$ 영행렬이다. cvxopt에서는 단위행렬은 $\texttt{spmatrix}$ 모듈로, 그 외 일반적 행렬은 $\texttt{sparse}$ 모듈로 만들 수 있다. 이들을 import 한 후, 아래와 같이 두 함수들 $\texttt{block_eye()}$와 $\texttt{block_zeros()}$를 정의하자.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># -*- coding: utf-8 -*-
</span>
<span class="kn">from</span> <span class="n">cvxopt</span> <span class="kn">import</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">spmatrix</span><span class="p">,</span> <span class="n">sparse</span><span class="p">,</span> <span class="n">glpk</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="k">def</span> <span class="nf">block_eye</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">spmatrix</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">),</span><span class="nf">range</span><span class="p">(</span><span class="n">size</span><span class="p">))</span> 

<span class="k">def</span> <span class="nf">block_zeros</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">sparse</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">))))</span>

</code></pre></div></div>

<p>그러면 24x24 단위행렬은 $\texttt{block_eye(24)}$ 로, 24x24 영행렬은 $\texttt{block_zeros(24,24)}$ 로 정의할 수 있다.</p>

<p>여기서 sparse란 `희소하다’ 라는 뜻으로, 0이 많은 행렬에 대해서 0을 곱하거나 더하는 연산을 수행하지 않고, 0을 저장하지도 않는 데이터 타입임을 의미한다 (0이 아닌 원소들 각각이 어느 위치에 있는지만을 저장한다). 이러한 sparse 처리를 해야 행렬 변수가 차지하는 메모리 크기도 작아지고 연산도 빨라진다. 특히 변수가 수만 개를 넘어가면 sparse 처리를 하지 않은 경우와 한 경우의 계산 시간 간 차이가 매우 크며, 구형 컴퓨터의 경우 메모리가 꽉 찰 수도 있다. 그러므로 웬만하면 sparse 처리를 하자.</p>

<p>그리고 시간별 부하를 원소로 하는 numpy array를 $\texttt{data_load}$라 하자. 편의상 전기 부하는 모든 시간에 대해 300kW라 하자 (실제로는 시간에 따라 다르다). 그러면, 위 제약조건을 변수 $\texttt{Aeq_balance}$와 $\texttt{beq_balance}$로 표현한 최종 코드는 아래와 같다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">p_load</span> <span class="o">=</span> <span class="mi">300</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">24</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>

<span class="n">t</span> <span class="o">=</span> <span class="mi">24</span>

<span class="n">block_zeros_storage</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">zeros</span><span class="p">((</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">))))</span> <span class="c1"># t x (t+1) 영행렬
</span><span class="n">Aeq_balance</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">([</span> <span class="p">[</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">t</span><span class="p">)],</span> <span class="p">[</span><span class="o">-</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">t</span><span class="p">)],</span> <span class="p">[</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">t</span><span class="p">)],</span> <span class="p">[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span> <span class="p">])</span> <span class="c1"># 블록들은 왼쪽에서부터 수전, 충전, 방전, 배터리내에너지
</span><span class="n">beq_balance</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">(</span><span class="n">p_load</span><span class="p">,</span><span class="n">tc</span><span class="o">=</span><span class="s">'d'</span><span class="p">)</span> <span class="c1"># tc='d'는 double형(실수) 의미
</span></code></pre></div></div>

<p>Aeq_balance 안이 $[ \textbf{I} \,\, -\textbf{I} \,\, \textbf{I} \,\, \textbf{0} ]$ 이다. 각 블록 행렬은 계통으로부터의 수전 $\textbf{p}_{\text{grid}}$, 배터리에 충전하는 전력 $\textbf{p}_{\text{ch}}$, 배터리로부터 방전되는 전력 $\textbf{p}_{\text{disch}}$, 그리고 배터리 내 저장된 에너지 $\textbf{e}_{\text{batt}}$에 대응한다. 이 때 배터리 내 저장된 에너지에 대응하는 영행렬은 $24 \times 25$ 행렬임에 유의한다 ($24 \times 24$가 아님). 또한 각 블록 행렬을 가로로 이어붙일 때는 각 블록 행렬을 대괄호로 감싸줘야 함에 주의한다. 그리고 $\texttt{beq_balance}$에서 상수 $\texttt{p_pv}$ 를 $\texttt{matrix()}$로 감싸줘야 함에도 주의한다.</p>

<p><br />
이번에는 나머지 등호조건인 배터리 내 에너지 조건을 보자. 해당 조건을 다시 매 시간별 식으로 표현하면 아래와 같다.</p>

<p>$ e_{\text{batt}}[1] - e_{\text{batt}}[0] - 0.9 p_{\text{ch}}[1] + p_{\text{disch}}[1]/ 0.9 = 0 $</p>

<p>$ e_{\text{batt}}[2] - e_{\text{batt}}[1] - 0.9 p_{\text{ch}}[2] + p_{\text{disch}}[2]/ 0.9 = 0 $</p>

<p>$\vdots$</p>

<p>$ e_{\text{batt}}[24] - e_{\text{batt}}[23] - 0.9 p_{\text{ch}}[24] + p_{\text{disch}}[24]/ 0.9 = 0 $</p>

<p>위 식을 보면, $\textbf{p}_{\text{ch}}$와 $\textbf{p}_{\text{disch}}$에 곱해지는 행렬은 단위행렬 꼴이지만, $\textbf{e}_{\text{batt}}$에 곱해지는 행렬은 단위행렬 꼴이 아님을 짐작할 수 있다. 하나의 식에 $\textbf{e}_{\text{batt}}$ 항이 두 개가 나오기 때문이다. 
이 제약을 행렬들의 식으로 쓰면, 아래와 같이 된다.</p>

<p>$ \begin{bmatrix}
\textbf{0} &amp; -\mu \textbf{I} &amp; \mu^{-1} \textbf{I}
\end{bmatrix} \begin{bmatrix}
\textbf{p}_{\text{grid}} \newline
\textbf{p}_{\text{ch}} \newline
\textbf{p}_{\text{disch}}
\end{bmatrix} + \begin{bmatrix}
-1 &amp; 1 &amp; 0 &amp; 0 &amp; \cdots &amp; 0 &amp; 0 &amp; 0 \newline
0 &amp; -1 &amp; 1 &amp; 0 &amp; \cdots &amp; 0 &amp; 0 &amp; 0 \newline
\vdots &amp; \vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots &amp; \vdots &amp; \vdots \newline
0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdots &amp; -1 &amp; 1 &amp; 0 \newline
0 &amp; 0 &amp; 0 &amp; 0 &amp; \cdots &amp; 0 &amp; -1 &amp; 1 
\end{bmatrix} \textbf{e}_{\text{batt}} = \textbf{0} $</p>

<p>위 제약조건을 변수 $\texttt{Aeq_batteryenergy}$와 $\texttt{beq_batteryenergy}$로 표현한 최종 코드는 아래와 같다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">block_batt</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">sparse</span><span class="p">([[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="mi">1</span><span class="p">)],[</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">size</span><span class="p">)]])</span> <span class="o">-</span> <span class="nf">sparse</span><span class="p">([[</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">size</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="mi">1</span><span class="p">)]])</span>

<span class="n">eff_batt</span> <span class="o">=</span> <span class="mf">0.9</span> <span class="c1"># 충전/방전 효율은 90%로 가정
</span>
<span class="n">Aeq_batteryenergy</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">([[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="o">-</span><span class="n">eff_batt</span><span class="o">*</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">t</span><span class="p">)],[</span><span class="mi">1</span><span class="o">/</span><span class="n">eff_batt</span><span class="o">*</span><span class="nf">block_eye</span><span class="p">(</span><span class="n">t</span><span class="p">)],[</span><span class="nf">block_batt</span><span class="p">(</span><span class="n">t</span><span class="p">)]])</span>
<span class="n">beq_batteryenergy</span> <span class="o">=</span> <span class="nf">block_zeros</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<p>cvxopt에서는 모든 등호제약조건들의 좌변의 계수들을 결합한 하나의 행렬 $A_{\text{eq}}$와 우변의 상수들을 결합한 하나의 벡터 $b_{\text{eq}}$를 요구한다. 그러므로 두 등호 제약을 결합해서, 최종적으로 하나의 행렬과 하나의 벡터로 만든다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Aeq</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">([</span><span class="n">Aeq_balance</span><span class="p">,</span><span class="n">Aeq_batteryenergy</span><span class="p">])</span> <span class="c1"># ([]) 안의 요소들에 []를 안 붙이면 vstack, []를 붙이면 hstack으로 생각
</span><span class="n">beq</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">([</span><span class="n">beq_balance</span><span class="p">,</span><span class="n">beq_batteryenergy</span><span class="p">])</span>
</code></pre></div></div>

<p>여기서 $\texttt{Aeq_balance}$와 $\texttt{Aeq_batteryenergy}$는 세로로 이어붙여진다. 이 때는 각 요소를 대괄호로 감싸지 않음에 주의. ($\texttt{beq_balance}$와 $\texttt{beq_batteryenergy}$ 에 대해서도 마찬가지이다)</p>

<p><br />
다음으로 이 문제의 부등호 제약을 보자. 해당 제약들은 배터리 충전전력/ 방전전력/ 저장에너지의 하한과 상한이다. 그리고 부등호 제약들은 모두 $Ax \leq b$ 꼴로 나타내야 한다 (부등호 방향이 틀리지 않도록 매우 주의해야 한다! 결과가 이상한 경우, 어떤 식에서 부등호 방향을 거꾸로 했기 때문일 경우가 많다).</p>

<p>그러므로 $ p_{\text{ch}}[t]$의 하한과 상한 조건은 아래와 같이 표현하는 것이 좋다.</p>

<p>$ p_{\text{ch}}[t] \leq 50, \,\, -P_{\text{ch}}[t] \leq 0$</p>

<p>이는 $ p_{\text{disch}}[t]$, $ e_{\text{batt}}[t]$에 대해서도 마찬가지이다.</p>

<p>단, $ e_{\text{batt}}[0]$의 경우 상한도 0으로 둔다. 또는 $ e_{\text{batt}}[0]$의 초기값을 따로 특정 수 $e_0$로 정한다고 하면, $ e_{\text{batt}}[0]$의 상한과 하한을 모두 $e_0$으로 둔다. 이런 제약조건을 두지 않으면, $ e_{\text{batt}}[0]$이 아무렇게나 정해질 수 있으며 비용 최소화를 위해 배터리의 용량 100 kWh와 같아질 것이다. 그러나 자정에 이미 배터리가 완충되어 있는 상황이 일반적이라고 보기는 어렵다.</p>

<p>각 변수들의 상한을 모은 벡터 $\textbf{u}$에 대한 식은 각 변수들의 계수가 1이고 우변이 상한값들인 부등식 $\textbf{I} \textbf{x} \preceq \textbf{u}$, 하한을 모은 벡터 $\textbf{l}$에 대한 식은 각 변수들의 계수가 -1이고 우변이 하한값에 마이너스를 취한 값들인 부등식 $-\textbf{I} \textbf{x} \preceq -\textbf{l}$이다.</p>

<p>상한과 하한에 대한 코드는 아래와 같다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">initialenergy_batt</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">lowerbounds</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">([[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">matrix</span><span class="p">([</span><span class="n">initialenergy_batt</span><span class="p">])],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)]])</span> 

<span class="k">def</span> <span class="nf">block_ones</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">):</span>
    <span class="k">return</span> <span class="nf">sparse</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">))))</span>

<span class="n">capacity_batt</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">c_rate_batt</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">block_onevec</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">(</span><span class="nf">matrix</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="n">t</span><span class="p">,</span><span class="mi">1</span><span class="p">))))</span> <span class="c1"># t x 1 일벡터 (모든 원소가 1)
</span><span class="n">upperbounds</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">([[</span><span class="n">np</span><span class="p">.</span><span class="n">inf</span><span class="o">*</span><span class="nf">block_ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="n">c_rate_batt</span><span class="o">*</span><span class="n">capacity_batt</span><span class="o">*</span><span class="nf">block_ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="n">c_rate_batt</span><span class="o">*</span><span class="n">capacity_batt</span><span class="o">*</span><span class="nf">block_ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">matrix</span><span class="p">([</span><span class="n">initialenergy_batt</span><span class="p">])],[</span><span class="n">capacity_batt</span><span class="o">*</span><span class="nf">block_ones</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)]])</span> 

<span class="n">A_lowerbound</span> <span class="o">=</span> <span class="o">-</span><span class="nf">block_eye</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">b_lowerbound</span> <span class="o">=</span> <span class="o">-</span><span class="n">lowerbounds</span><span class="p">.</span><span class="n">T</span> <span class="c1"># lowerbounds는 행벡터였음, 이를 열벡터로 바꿈
</span><span class="n">A_upperbound</span> <span class="o">=</span> <span class="nf">block_eye</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">b_upperbound</span> <span class="o">=</span> <span class="n">upperbounds</span><span class="p">.</span><span class="n">T</span> <span class="c1"># upperbounds는 행벡터였음, 이를 열벡터로 바꿈
</span>
<span class="n">A</span> <span class="o">=</span> <span class="nf">sparse</span><span class="p">([</span><span class="n">A_lowerbound</span><span class="p">,</span> <span class="n">A_upperbound</span><span class="p">])</span> <span class="c1"># lower bound는 부등호 방향 때문에 마이너스
</span><span class="n">b</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">([</span><span class="n">b_lowerbound</span><span class="p">,</span> <span class="n">b_upperbound</span><span class="p">])</span> <span class="c1"># lower bound는 부등호 방향 때문에 마이너스, b들은 전치하였음에 주의
</span>
</code></pre></div></div>

<p>이 때 편의를 위해 $\texttt{b_lowerbound}$와 $\texttt{b_upperbound}$에 대응하는 행벡터들 $\texttt{lowerbounds}$와 $\texttt{upperbounds}$를 만들고, 여기에 실제 하한값과 상한값들을 입력하도록 만들었다. 위에서 $\texttt{Aeq}$를 만들 때 각 열이 각 변수에 대응되었으므로, 상한과 하한을 코딩할 때도 각 열을 각 변수로 보는 관점을 그대로 적용할 수 있도록 하였다.</p>

<p>$\texttt{b_lowerbound}$의 73번째 원소 (0번째 시간의 배터리 내 에너지)만 주어진 초기값 \texttt{initialenergy_batt}이고, 나머지는 전부 0이다. 마찬가지로 $\texttt{b_upperbound}$의 73번째 원소 (0번째 시간의 배터리 내 에너지)만 주어진 초기값 \texttt{initialenergy_batt}이고, 나머지는 수전 전력에 대해서는 무한대 (즉 따로 상한이 없음), 충전과 방전 전력에 대해서는 배터리 용량에 c-rate를 곱한 값, $1 \sim 24$번째 시간의 배터리 내 에너지에 대해서는 배터리 용량이다.</p>

<p><br />
마지막으로, 목적함수를 코딩한다. 목적함수에서 각 변수들에 붙는 계수들을 모은 벡터 $\texttt{c}$를 만든다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">eleccost_base</span> <span class="o">=</span> <span class="mf">67.9</span>
<span class="n">eleccost_mid</span> <span class="o">=</span> <span class="mf">120.8</span>
<span class="n">eleccost_peak</span> <span class="o">=</span> <span class="mf">202.9</span>
<span class="n">eleccost</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">hstack</span><span class="p">([</span><span class="n">eleccost_base</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">)),</span>
                      <span class="n">eleccost_mid</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)),</span>
                      <span class="n">eleccost_peak</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span>
                      <span class="n">eleccost_mid</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span>
                      <span class="n">eleccost_peak</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)),</span>
                      <span class="n">eleccost_mid</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)),</span>
                      <span class="n">eleccost_base</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))])</span>
<span class="n">c</span> <span class="o">=</span> <span class="nf">matrix</span><span class="p">([[</span><span class="nf">matrix</span><span class="p">(</span><span class="n">eleccost</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="p">)],[</span><span class="nf">block_zeros</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">)]])</span> <span class="c1"># eleccost와 0에 먼저 matrix 걸어줘야 함에 주의
</span></code></pre></div></div>

<p>여기서 $\texttt{eleccost}$를 $\texttt{matrix()}$로 감싸줘야 함에 주의한다.</p>

<p><br />
이제 선형계획법의 모든 제약조건들과 목적함수에 대응하는 행렬 및 벡터들을 Python 내 변수로 정의했다. 해당 문제를 GLPK 모듈로 풀고, 결과를 확인하는 명령어는 아래와 같다.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">glpk</span><span class="p">.</span><span class="nf">lp</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">Aeq</span><span class="p">,</span><span class="n">beq</span><span class="p">,</span><span class="n">options</span><span class="o">=</span><span class="p">{</span> <span class="s">'msg_lev'</span><span class="p">:</span> <span class="s">'GLP_MSG_ON'</span><span class="p">})</span> <span class="c1"># 선형계획법 문제를 품
</span><span class="n">totalcost</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># 24시간 동안의 총 전기요금
</span><span class="n">p_grid</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">:</span><span class="mi">24</span><span class="p">])</span>
<span class="n">p_charge</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">24</span><span class="p">:</span><span class="mi">48</span><span class="p">])</span>
<span class="n">p_discharge</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">48</span><span class="p">:</span><span class="mi">72</span><span class="p">])</span>
<span class="n">e_batt</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">72</span><span class="p">:])</span>
</code></pre></div></div>

<p>배터리의 충전/방전 스케줄이 어떤지, 그리고 배터리 내 에너지가 어떻게 변화하는지 그래프로 보자
(계산 결과를 그래프와 같이 보여주기)</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> 태그: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#beautifulsoup" class="page__taxonomy-item p-category" rel="tag">BeautifulSoup</a><span class="sep">, </span>
    
      <a href="/tags/#python" class="page__taxonomy-item p-category" rel="tag">python</a>
    
    </span>
  </p>



<!-- 
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> 카테고리: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#energy" class="page__taxonomy-item p-category" rel="tag">Energy</a>
    
    </span>
  </p>

 -->
        <!-- 

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> 업데이트:</strong> <time class="dt-published" datetime="2023-04-13T00:00:00+09:00">2023-04-13</time></p>
 -->
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">공유하기</h4>
  

  <!-- <a href="https://twitter.com/intent/tweet?text=%EC%A0%95%EC%88%98%EC%84%A0%ED%98%95%EA%B3%84%ED%9A%8D%EB%B2%95+%EA%B8%B0%EB%B0%98+%EB%B6%84%EC%82%B0%EC%97%90%EB%84%88%EC%A7%80%EC%8B%9C%EC%8A%A4%ED%85%9C+%EC%B5%9C%EC%A0%81%ED%99%94+%EC%84%A4%EB%AA%85+-+3%29+%EB%B0%B0%ED%84%B0%EB%A6%AC%EC%9D%98+%EC%B6%A9%2F%EB%B0%A9%EC%A0%84+%EC%8A%A4%EC%BC%80%EC%A4%84+%EC%A0%95%ED%95%98%EA%B8%B0%3A+Python+%EC%BD%94%EB%93%9C%20http%3A%2F%2Flocalhost%3A4000%2F2023%2F04%2Flinprogthree.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> -->

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2F2023%2F04%2Flinprogthree.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2F2023%2F04%2Flinprogthree.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="공유하기 LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      <p></p>
        <h4 class="page__meta-title"><span>Energy</span> <span>카테고리 내 다른 글 보러가기</span></h4>
        


  

  

  

  

  

  

  

  
  	
  	
  	
  	
  	

<nav class="pagination_prev_next"> <!-- 식빵맘 코드에서 조금 수정함 -->

  
    
      <a href="/2023/04/linprogfour.html" class="pagination_prev_next--pager"><span class="prev_next">다음 글  &nbsp  </span>정수선형계획법 기반 분산에너지시스템 최적화 설명 - 4) 태양광과 배터리의 용량 정하기</a>
    
    
      <a href="/2023/04/linprogtwo.html" class="pagination_prev_next--pager"><span class="prev_next">이전 글  &nbsp</span>정수선형계획법 기반 분산에너지시스템 최적화 설명 - 2) 배터리의 충/방전 스케줄 정하기: 수식</a>
        
  

</nav>
      <p></p>
    </div>

    
  </article>

  
  <!-- 
    <div class="page__related">
      <h2 class="page__related-title">참고</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/logo.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2023/04/monthlyenergyone.html" rel="permalink">건축물 별 월별 에너지 사용량 데이터셋 - 1) 모든 월에 대한 통합 및 표제부와의 결합 후 SQLite DB화
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-20T00:00:00+09:00">2023-04-20</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">필자에게 있어 각별한 데이터셋이 있다. (비주거용) 건축물 별 월별 에너지 사용량 데이터셋이다. 각지번 주소 단위의 개별 비주거용 건물별로 특정 월에 소비한 전기와 가스의 양을 kWh 단위로 기록한 데이터셋이다.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/logo.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2023/04/reinforcefive.html" rel="permalink">강화학습 기반 마이크로그리드 내 배터리 스케줄링 - 5) TD3, SAC를 통한 continuous control 도출
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-19T00:00:00+09:00">2023-04-19</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">저번 포스팅에서는 continuous control을 위한 기본적인 심층강화학습 방법, Deep Deterministic Policy Gradient (DDPG) 를 적용해 보았다. 놀랍게도(?) 이 시리즈에서 다루는 마이크로그리드 문제에서는, DDPG가 Deep Q-learnin...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/logo.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2023/04/reinforcefour.html" rel="permalink">강화학습 기반 마이크로그리드 내 배터리 스케줄링 - 4) DDPG를 통한 continuous control 도출
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-18T00:00:00+09:00">2023-04-18</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">저번 포스팅에서는 마이크로그리드에 discrete action 기반의 심층강화학습을 적용해 과거 시점의데이터 기반으로 control을 결정하는 방법을 알아보았다. 그러나 실제로는 continuous action이므로, continuous action을 다루는 심층강화학습 기법을 적...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/logo.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/2023/04/reinforcethree.html" rel="permalink">강화학습 기반 마이크로그리드 내 배터리 스케줄링 - 3) Deep Q-learning을 통한 discrete control 도출
</a>
      
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2023-04-17T00:00:00+09:00">2023-04-17</time>
      </span>
    

    

    
  </p>


    <p class="archive__item-excerpt" itemprop="description">이전 포스팅에서도 언급했듯, 이 문제에서 state는 직전 24시간 동안의 태양광 발전량과 부하 및 직전 1시간의 배터리 내 에너지양이고, action은 1.1kW 수전/ 1.1kW 송전/ idle 3가지이다. (action 인덱스는 0,1,2라 하자). 이 때 심층신경망은 sta...</p>
  </article>
</div>

        
      </div>
    </div> -->
  
  <!--  -->
</div>

  </div>

  

  <aside class="sidebar__top">
    <a href="#site-nav"> <i class="fas fa-angle-double-up fa-2x"></i></a>
    </aside>

  <div id="footer" class="page__footer">
    <footer>
      <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
      <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>팔로우:</strong></li>
    

    
      
        
          <li><a href="https://blog.naver.com/song4energy" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> 피드</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2023 Jeonghun Song. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

    </footer>
  </div>

  
  <script src="/assets/js/main.min.js"></script>










</body>

</html>